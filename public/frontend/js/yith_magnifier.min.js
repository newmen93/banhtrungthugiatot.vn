/**
 * YITH Magnifier
 * 
 * @version 0.1
 * @author Your Inspiration Themes Team <info@yithemes.com>
 *
 * MIT License.
 */
(function(t,b,s){b.fn.imagesLoaded===s&&function(a,b){var f="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(c){function p(){var b=a(r),d=a(q);h&&(q.length?h.reject(g,b,d):h.resolve(g));a.isFunction(c)&&c.call(l,g,b,d)}function d(a){k(a.target,"error"===a.type)}function k(b,e){b.src!==f&&-1===a.inArray(b,m)&&(m.push(b),e?q.push(b):r.push(b),a.data(b,"imagesLoaded",{isBroken:e,src:b.src}),n&&h.notifyWith(a(b),[e,g,a(r),a(q)]),g.length===m.length&&
    (setTimeout(p),g.unbind(".imagesLoaded",d)))}var l=this,h=a.isFunction(a.Deferred)?a.Deferred():0,n=a.isFunction(h.notify),g=l.find("img").add(l.filter("img")),m=[],r=[],q=[];a.isPlainObject(c)&&a.each(c,function(a,b){if("callback"===a)c=b;else if(h)h[a](b)});g.length?g.bind("load.imagesLoaded error.imagesLoaded",d).each(function(d,c){var h=c.src,g=a.data(c,"imagesLoaded");if(g&&g.src===h)k(c,g.isBroken);else if(c.complete&&c.naturalWidth!==b)k(c,0===c.naturalWidth||0===c.naturalHeight);else if(c.readyState||
    c.complete)c.src=f,c.src=h}):p();return h?h.promise(l):l}}(jQuery);b.yith_magnifier=function(a,e){this.t=e;this.element=b(e);this._init(a)};b.yith_magnifier.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:!1,tintOpacity:0.5,lensOpacity:0.5,softFocus:!1,smoothMove:3,showTitle:!0,titleOpacity:0.5,adjustX:0,adjustY:0,phoneBehavior:"inside",loadingLabel:"Loading...",enableSlider:!0,slider:"carouFredSel",sliderOptions:{},onLoad:function(){return!1},onEnter:function(){return!1},onLeave:function(){return!1},
    onMove:function(){return!1},onClick:function(){return!1},elements:{zoom:b(".yith_magnifier_zoom"),zoomImage:b(".yith_magnifier_zoom img"),gallery:b(".yith_magnifier_gallery li a")}};b.yith_magnifier.prototype={_init:function(a){var e=this;b.each(b.yith_magnifier.defaults.elements,function(a,c){b.yith_magnifier.defaults.elements[a]=b(c,e)});e.options=b.extend(!0,{},b.yith_magnifier.defaults,a);e.isPhone=e._isPhone();e._loading();e.element.imagesLoaded(function(){e.options.onLoad();e._initZoom();e._initGallery()})},
    _initGallery:function(){var a=this,e=a.options.elements,f=e.gallery,c=e.zoom,p=e.zoomImage;if(0<f.length){if(f.on("click",function(d){d.preventDefault();d=b(this);a.destroy();c.attr("href",this.href);p.attr("src",d.data("small")).attr("title","").attr("title",d.attr("title"));b.data(a.t,"yith_magnifier",new b.yith_magnifier(a.options,a.element))}),a.options.enableSlider)f.parents("ul")[a.options.slider](a.options.sliderOptions)}else f.on("click",function(a){a.preventDefault();return!1})},_loading:function(){if(this.options.disableRightClick)b(document).on("contextmenu",
        function(a){return!1});if(this.mouseTrap===s){var a=this.options.elements.zoom.width();b('<div class="yith_magnifier_loading">'+this.options.loadingLabel+"</div>").css({width:a/3,left:a/2-a/6,opacity:0.5}).appendTo(this.options.elements.zoom.parent())}},_initZoom:function(){var a=this;a.zoom=a.options.elements.zoom;a.zoomImage=a.options.elements.zoomImage;a.zoom.wrap('<div class="yith_magnifier_zoom_wrap"></div>');a.IMG_zoomImage=new Image;a.IMG_zoomImage.src=a.zoom.attr("href");a.IMG_smallImage=
        new Image;a.IMG_smallImage.src=a.zoomImage.attr("src");b.browser.msie&&8==b.browser.version?b(a.IMG_zoomImage).load(function(){a._initTrap()}):b([a.IMG_zoomImage,a.IMG_smallImage]).imagesLoaded(function(){a._initTrap()})},_initTrap:function(){var a=this,e=a.IMG_zoomImage;a.mx=0;a.my=0;a.controlTimer=0;a.lens=null;a.tint=null;a.softFocus=null;a.zoomDiv=null;a.cw=0;a.ch=0;a.zw=0;a.destU=0;a.destV=0;a.currU=0;a.currV=0;a.mouseTrap=null;var f=a.options.elements.zoom,c=a.options.elements.zoomImage;b(".yith_magnifier_loading").remove();
        this.element.find(".yith_magnifier_mousetrap")&&this.element.find(".yith_magnifier_mousetrap").remove();this.mouseTrap=b('<div class="yith_magnifier_mousetrap" />').css({width:"100%",height:"100%",top:0,left:0}).appendTo(f.parent());var p="ontouchstart"in document.documentElement?!0:!1;this.mouseTrap.on("touchmove mousemove",this,function(b){a.options.onMove();a.mx="undefined"!=typeof b.originalEvent.touches?b.originalEvent.touches[0].pageX:b.pageX;a.my="undefined"!=typeof b.originalEvent.touches?
            b.originalEvent.touches[0].pageY:b.pageY}).on("touchend mouseleave",this,function(b){clearTimeout(a.controlTimer);a.lens&&a.lens.fadeOut(299);a.tint&&a.tint.fadeOut(299);a.softFocus&&a.softFocus.fadeOut(299);a.zoomDiv.fadeOut(300,function(){a._onLeave()});return!1}).on("touchstart click",this,function(b){a.options.onClick()}).on("touchstart mouseenter",this,function(d){a.options.onEnter();p&&d.preventDefault();a.mx="undefined"!=typeof d.originalEvent.touches?d.originalEvent.touches[0].pageX:d.pageX;
                a.my="undefined"!=typeof d.originalEvent.touches?d.originalEvent.touches[0].pageY:d.pageY;a.zw=d.data;a.zoomDiv&&(a.zoomDiv.stop(!0,!1),a.zoomDiv.remove());d=a.options.adjustX;var k=a.options.adjustY,l=c.outerWidth(),h=c.outerHeight(),n=a.options.zoomWidth,g=a.options.zoomHeight;"auto"==a.options.zoomWidth&&(n=l);"auto"==a.options.zoomHeight&&(g=h);var m=f.parent();switch(a.options.position){case "top":k-=g;break;case "right":d+=l;break;case "bottom":k+=h;break;case "left":d-=n;break;case "inside":n=
                    l;g=h;break;default:m=b("#"+a.options.position),m.length?(n=m.innerWidth(),g=m.innerHeight()):(m=f,d+=l,k+=h)}a.isPhone&&"inside"==a.options.phoneBehavior&&(n=l,g=h,k=d=0);a.zoomDiv=b('<div class="yith_magnifier_zoom_magnifier" />').css({left:d,top:k,width:n,height:g,backgroundImage:"url("+e.src+")"}).appendTo(m);c.attr("title")&&a.options.showTitle&&b('<div class="yith_magnifier_title">'+c.attr("title")+"</div>").appendTo(a.zoomDiv);a.isPhone?"disable"!=a.options.phoneBehavior?a.zoomDiv.fadeIn(500):
                    a.lens.fadeOut(299):a.zoomDiv.fadeIn(500);a.lens&&(a.lens.remove(),a.lens=null);a.cw=1>=e.width?c.outerWidth()/e.naturalWidth*a.zoomDiv.width():c.outerWidth()/e.width*a.zoomDiv.width();a.ch=1>=e.height?c.outerHeight()/e.naturalHeight*a.zoomDiv.height():c.outerHeight()/e.height*a.zoomDiv.height();a.lens=b('<div class="yith_magnifier_lens" />').css({width:a.cw,height:a.ch}).appendTo(f);a.mouseTrap.css("cursor",a.lens.css("cursor"));d=!1;a.options.tint&&(a.tint=b("<div />").css({display:"none",position:"absolute",
                    left:0,top:0,width:c.outerWidth(),height:c.outerHeight(),backgroundColor:a.options.tint,opacity:a.options.tintOpacity}).appendTo(f),a.lens.append(b("<img />",{src:c.attr("src")})),d=!0,a.tint.fadeIn(500));a.options.softFocus&&(a.softFocus=b("<div />").css({position:"absolute",display:"none",top:"1px",left:"1px",width:c.outerWidth(),height:c.outerHeight(),opacity:0.5}).appendTo(f),a.softFocus.append(b("<img />",{src:c.attr("src")})),0==a.lens.find("img").length&&a.lens.append(b("<img />",{src:c.attr("src")})),
                    d=!0,a.softFocus.fadeIn(500));d||a.lens.css("opacity",a.options.lensOpacity);"inside"!==a.options.position&&a.lens.fadeIn(500);a.zw._controlLoop()})},_controlLoop:function(){var a=this;if(this.lens){var b=this.mx-this.zoomImage.offset().left-0.5*this.cw>>0,f=this.my-this.zoomImage.offset().top-0.5*this.ch>>0;0>b?b=0:b>this.zoomImage.outerWidth()-this.cw&&(b=this.zoomImage.outerWidth()-this.cw);0>f?f=0:f>this.zoomImage.outerHeight()-this.ch&&(f=this.zoomImage.outerHeight()-this.ch);this.lens.css({left:b-
        2,top:f-1});this.lens.find("img").css({width:this.zoomImage.outerWidth(),height:this.zoomImage.outerHeight(),marginLeft:-b+"px ",marginTop:-f+"px"});this.destU=1>=this.IMG_zoomImage.width?b/this.zoomImage.outerWidth()*this.IMG_zoomImage.naturalWidth>>0:b/this.zoomImage.outerWidth()*this.IMG_zoomImage.width>>0;this.destV=1>=this.IMG_zoomImage.height?f/this.zoomImage.outerHeight()*this.IMG_zoomImage.naturalHeight>>0:f/this.zoomImage.outerHeight()*this.IMG_zoomImage.height>>0;this.currU+=(this.destU-
        this.currU)/this.options.smoothMove;this.currV+=(this.destV-this.currV)/this.options.smoothMove;this.zoomDiv.css("background-position",-(this.currU>>0)+"px "+(-(this.currV>>0)+"px"))}this.controlTimer=setTimeout(function(){a._controlLoop()},30)},_onLeave:function(){this.options.onLeave();this.zoomDiv&&(this.zoomDiv.remove(),this.zoomDiv=null);this._removeElements()},_removeElements:function(){this.lens&&(this.lens.remove(),this.lens=null);this.tint&&(this.tint.remove(),this.tint=null);this.softFocus&&
    (this.softFocus.remove(),this.softFocus=null);0<this.element.find(".yith_magnifier_loading").length&&this.element.find(".yith_magnifier_loading").remove()},_isPhone:function(){var a=navigator.userAgent.toLowerCase();return a.match(/iphone/i)||a.match(/ipod/i)||a.match(/android/i)},destroy:function(){this.zoom&&this.zoom.unwrap();this.mouseTrap&&(this.mouseTrap.unbind(),this.mouseTrap.remove(),this.mouseTrap=null);this.zoomDiv&&(this.zoomDiv.remove(),this.zoomDiv=null);this.options.disableRightClick&&
    b(document).unbind();this._removeElements();this.options.elements.gallery.unbind();this.element.removeData("yith_magnifier")}};b.fn.yith_magnifier=function(a){if("string"===typeof a){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var f=b.data(this,"yith_magnifier");f?b.isFunction(f[a])&&"_"!==a.charAt(0)?f[a].apply(f,e):b.error("no such method '"+a+"' for yith_magnifier instance"):b.error("cannot call methods on yith_magnifier prior to initialization; attempted to call method '"+
    a+"'")})}else this.each(function(){b.data(this,"yith_magnifier")?b.error("yith_magnifier already istantiated."):b.data(this,"yith_magnifier",new b.yith_magnifier(a,this))});return this}})(window,jQuery);
